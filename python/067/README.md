# No.067

サーバにアクセスするたびに異なるステータスコードを返すプログラムを作成する。

DockerfileではPythonの公式イメージをベースにして、`main.py`スクリプトをコンテナ内の`/app`ディレクトリにコピーし、ポート8080を公開します。

Dockerイメージをビルドするには次のコマンドを実行します：

```bash
docker build -t random-status-server .
```

コンテナを実行するには次のコマンドを使用します：

```bash
docker run --rm -p 8080:8080 random-status-server
```

実行例：

ローカルで実行

```bash
$ python main.py
サーバーをポート8080で起動中...
127.0.0.1 - - [27/Aug/2023 10:29:02] "GET / HTTP/1.1" 500 -
127.0.0.1 - - [27/Aug/2023 10:29:03] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [27/Aug/2023 10:29:04] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [27/Aug/2023 10:29:05] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [27/Aug/2023 10:29:05] "GET / HTTP/1.1" 503 -
127.0.0.1 - - [27/Aug/2023 10:29:06] "GET / HTTP/1.1" 200 -
```

Dockerで実行

```bash
$ docker run --rm -p 8080:8080 random-status-server
サーバーをポート8080で起動中...
172.17.0.1 - - [27/Aug/2023 10:24:12] "GET / HTTP/1.1" 500 -
172.17.0.1 - - [27/Aug/2023 10:24:17] "GET / HTTP/1.1" 200 -
172.17.0.1 - - [27/Aug/2023 10:24:22] "GET / HTTP/1.1" 500 -
172.17.0.1 - - [27/Aug/2023 10:24:27] "GET / HTTP/1.1" 503 -
172.17.0.1 - - [27/Aug/2023 10:24:32] "GET / HTTP/1.1" 503 -
```
